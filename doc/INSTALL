This file contains the installation instructions for Joukahainen.

As Joukahainen is still being developed, there are not fixed
installation packages. You should check out the code directly
from SVN trunk (which should be rather stable), write your
language pack, test the application (and report any bugs you
may find) and when you are happy, put it to production use.
Quite likely all installations of Joukahainen will be different
anyway, so having single unified packages does not make any sense
at the moment.



Requirements
============

These installation instructions assume that you are using Linux.
There should be nothing to prevent using other operating systems
as well, and I will happily fix bugs and improve these instructions
if that is needed to support them.

You will need to have all of the following programs installed and
configured:
- Apache http server
- PostgreSQL database server and client
- Python
- mod_python (Python <-> Apache)
- python-pygresql (Python <-> PostgreSQL)
- gettext
- Subversion (SVN)
- GNU make (other variants may work as well) 

For all of these programs, any version released in year 2005 or later
should do. Here on Debian unstable I have the following versions:
apache2                  2.0.55-4.1
postgresql-7.4           7.4.13-5
postgresql-client-7.4    7.4.13-5
python                   2.4.3-11
libapache2-mod-python    3.2.10-1
python-pygresql          3.8.1-1
gettext                  0.15-1
subversion               1.3.2-5+b1
make                     3.81-2



Installing Joukahainen
======================

In the following instructions INSTALLATION_DIRECTORY is the directory
where Joukahainen will be installed (for example "/usr/local/joukahainen")
and WWW_LOCAL_ROOT is the directory on the local filesystem that contains
the files visible through the http server (for example "/var/www/joukahainen").

1) Check out the application from SVN:
svn co https://svn.sourceforge.net/svnroot/hunspell-fi/trunk/joukahainen INSTALLATION_DIRECTORY/joukahainen

2) Create WWW_LOCAL_ROOT and add symbolic links from INSTALLATION_DIRECTORY/joukahainen/wwwroot
   to WWW_LOCAL_ROOT for the following files:
   - _apply_config.py
   - index.py
   - jscripts.js
   - query.py
   - style.css
   - task.py
   - user.py
   - word.py

3) Copy INSTALLATION_DIRECTORY/joukahainen/wwwroot/_config.py to WWW_LOCAL_ROOT and modify it as needed.
   Probably you have to do the following:
   - change INSTALLATION_DIRECTORY to match what you have used here
   - set WWW_ROOT_DIR to what you want to have as a directory for Joukahainen in the http URL:s
   - set WIKI_URL to match the Wikiktionary of your vocabulary language (if you want Wiki links to work)
   - set PW_SALT to a random string
   - set LANG to match the language code of your vocabulary
   - set DB_PASSWORD to a random string (you may want to change other database parameters as well, but
     the defaults should be good enough in typical setup)

4) Configure your web server. The following configuration snippet should be enough:

  <Directory WWW_LOCAL_ROOT> # Change this
    AddHandler python-program .py
    PythonHandler mod_python.publisher
    PythonDebug On        # Set this to Off before making the installation public to improve security
    AddType text/html;charset=UTF-8 .html
    DirectoryIndex index/index
  </Directory>

5) Create language pack for your language. This is described later and is the most demanding
   part of the installation unless there already is a language pack under
   INSTALLATION_DIRECTORY/joukahainen/langpacks for your language.

6) Use the psql tool to create the database user for which you had set the user name and password in
   _config.py

7) Use the psql tool (as postgres, not as the newly created user) to set up the database schema and
   populate it with static data:
   
   \i INSTALLATION_DIRECTORY/joukahainen/sql/schema.sql
   \i INSTALLATION_DIRECTORY/joukahainen/langpacks/LANG/static.sql

8) Create the gettext .mo files by entering INSTALLATION_DIRECTORY/joukahainen and running make.

9) Perform any language specific installation tasks that may be specified in the INSTALL file of
   your language pack.

10) (Re)start Apache, and you should have a working installation.



Creating a language pack
========================

To be done. The instructions should contain an example, and the only available language
pack (Finnish) is too complicated for that.
